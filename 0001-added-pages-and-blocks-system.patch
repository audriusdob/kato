From 7f8bf552dfdd60081e86f1635a64387ba64e12e8 Mon Sep 17 00:00:00 2001
From: Parminde Klair <p.klair@scorchsoft.com>
Date: Mon, 20 Oct 2014 15:46:55 +0100
Subject: [PATCH] added pages and blocks system

---
 backend/controllers/BlockController.php    |   7 -
 backend/controllers/MediaController.php    |  25 ++
 backend/controllers/PageController.php     |   6 +
 backend/models/Block.php                   |  24 +-
 backend/models/Page.php                    | 160 +++++++-
 backend/views/page/_form.php               |  72 ++--
 backend/views/page/_inLineBlocks.php       | 106 ++++++
 common/config/main.php                     |   7 +
 common/models/User.php                     |  18 +-
 composer.json                              |   5 +-
 composer.lock                              | 583 ++++++++++++++++++-----------
 console/migrations/m140425_190132_init.php |  14 +-
 docs/installation.md                       |   1 +
 docs/pages.md                              |   8 +-
 frontend/config/main.php                   |   9 -
 frontend/controllers/PageController.php    |   3 +-
 frontend/themes/basic/blocks/basic.json    |  14 +
 frontend/themes/basic/blocks/homepage.json |  10 +
 frontend/themes/basic/page/basic.php       |  23 ++
 frontend/themes/basic/page/view.php        |  20 -
 frontend/themes/basic/site/index.php       |   2 +
 21 files changed, 807 insertions(+), 310 deletions(-)
 create mode 100644 backend/views/page/_inLineBlocks.php
 create mode 100644 frontend/themes/basic/blocks/basic.json
 create mode 100644 frontend/themes/basic/blocks/homepage.json
 create mode 100644 frontend/themes/basic/page/basic.php
 delete mode 100644 frontend/themes/basic/page/view.php

diff --git a/backend/controllers/BlockController.php b/backend/controllers/BlockController.php
index 0425b95..81f00ea 100644
--- a/backend/controllers/BlockController.php
+++ b/backend/controllers/BlockController.php
@@ -144,11 +144,4 @@ class BlockController extends Controller
 			throw new NotFoundHttpException('The requested page does not exist.');
 		}
 	}
-
-    public function actionUpload()
-    {
-        $file = \Yii::$app->kato->mediaUpload('attachment', true);
-        dump($file);
-        exit;
-    }
 }
diff --git a/backend/controllers/MediaController.php b/backend/controllers/MediaController.php
index fc10bca..43e877a 100644
--- a/backend/controllers/MediaController.php
+++ b/backend/controllers/MediaController.php
@@ -5,6 +5,7 @@ namespace backend\controllers;
 use Yii;
 use yii\filters\VerbFilter;
 use yii\filters\AccessControl;
+use yii\helpers\Json;
 use yii\web\NotFoundHttpException;
 use backend\models\Media;
 use yii\helpers\Url;
@@ -94,4 +95,28 @@ class MediaController extends \yii\web\Controller
             throw new NotFoundHttpException('The requested page does not exist.');
         }
     }
+
+    public function actionUpload()
+    {
+        $file = \Yii::$app->kato->mediaUpload('attachment', true);
+        dump($file);
+        exit;
+    }
+
+    public function actionListMedia()
+    {
+        $result = array();
+        if ($media = Media::find()->all()) {
+            foreach ($media as $data) {
+                $result[] = array(
+                    'thumb' => '/' . $data->source,
+                    'image' => '/' . $data->source,
+                    'title' => '/' . $data->filename,
+                    //'filelink' => '/' . $data->source,
+                );
+            }
+        }
+
+        echo Json::encode($result);
+    }
 }
\ No newline at end of file
diff --git a/backend/controllers/PageController.php b/backend/controllers/PageController.php
index 8bd1aeb..25fcfd0 100644
--- a/backend/controllers/PageController.php
+++ b/backend/controllers/PageController.php
@@ -105,6 +105,12 @@ class PageController extends \yii\web\Controller
         $meta['description'] = 'Update page';
         $meta['pageIcon'] = $this->pageIcon;
 
+        //load blocks
+        $model->loadBlocks();
+
+        //update blocks
+        $model->updateBlocks();
+
 		if ($model->load(Yii::$app->request->post()) && $model->save()) {
             Yii::$app->session->setFlash('success', 'Page has been updated');
 			return $this->redirect(['update', 'id' => $model->id]);
diff --git a/backend/models/Block.php b/backend/models/Block.php
index 819cb1f..7fd7770 100644
--- a/backend/models/Block.php
+++ b/backend/models/Block.php
@@ -16,7 +16,10 @@ use yii\helpers\ArrayHelper;
  * @property integer $created_by
  * @property string $update_time
  * @property integer $updated_by
- * @property string $parent
+ * @property string $parent_layout
+ * @property string $block_type
+ * @property string $comments
+ * @property string $category
  * @property integer $listing_order
  * @property integer $status
  * @property integer $deleted
@@ -44,6 +47,8 @@ class Block extends ActiveRecord
 			[['create_time', 'update_time', 'content'], 'safe'],
 			[['created_by', 'updated_by', 'listing_order', 'status', 'deleted'], 'integer'],
 			[['title', 'parent'], 'string', 'max' => 70],
+            [['parent_layout', 'block_type', 'category'], 'string', 'max' => 50],
+            [['comments'], 'string', 'max' => 100],
             ['status', 'default', 'value' => self::STATUS_NOT_PUBLISHED],
             ['status', 'in', 'range' => [self::STATUS_PUBLISHED, self::STATUS_NOT_PUBLISHED]],
 		];
@@ -63,6 +68,10 @@ class Block extends ActiveRecord
 			'update_time' => 'Update Time',
 			'updated_by' => 'Updated By',
 			'parent' => 'Parent',
+            'block_type' => 'Block Type',
+            'parent_layout' => 'Parent Layout',
+            'comments' => 'Comments',
+            'category' => 'Category',
 			'listing_order' => 'Listing Order',
 			'status' => 'Status',
 			'deleted' => 'Deleted',
@@ -105,6 +114,8 @@ class Block extends ActiveRecord
 
             $this->title = Inflector::slug($this->title);
 
+            $this->category = Inflector::slug($this->category);
+
             return true;
         }
         return false;
@@ -153,4 +164,15 @@ class Block extends ActiveRecord
     {
         return \Yii::$app->kato->renderBlock($this->content);
     }
+
+    public function getLabel()
+    {
+        $label = ucwords(str_replace("-", " ", $this->title));
+
+        if ($this->comments) {
+            //$label = '<span data-toggle="tooltip" title="' . $this->comments . '" data-placement="top" data-trigger="hover" style="border-bottom: 1px dotted #000;">' .$label.'</span>';
+        }
+
+        return '<label class="col-sm-3 control-label">' . $label . '</label>';
+    }
 }
diff --git a/backend/models/Page.php b/backend/models/Page.php
index 7c8a46b..ff42066 100644
--- a/backend/models/Page.php
+++ b/backend/models/Page.php
@@ -8,6 +8,7 @@ use kato\helpers\KatoBase;
 use kato\ActiveRecord;
 use yii\helpers\ArrayHelper;
 use yii\helpers\Json;
+use yii\web\HttpException;
 
 /**
  * This is the model class for table "kato_page".
@@ -22,12 +23,14 @@ use yii\helpers\Json;
  * @property integer $created_by
  * @property string $update_time
  * @property integer $updated_by
- * @property integer $level
  * @property string $layout
  * @property integer $parent_id
  * @property integer $type
  * @property boolean $status
  * @property boolean $deleted
+ * @property string $menu_title
+ * @property boolean $menu_hidden
+ * @property integer $listing_order
  */
 class Page extends ActiveRecord
 {
@@ -35,6 +38,8 @@ class Page extends ActiveRecord
     const STATUS_PUBLISHED = 1;
     const TYPE_STATIC = 0;
     const TYPE_NON_STATIC = 1;
+    const MENU_HIDDEN_NO = 0;
+    const MENU_HIDDEN_YES = 1;
 
     public $pagesDir = null;
 
@@ -55,18 +60,20 @@ class Page extends ActiveRecord
 			[['content', 'content_html'], 'string'],
 			[['create_time', 'created_by', 'update_time'], 'required'],
 			[['create_time', 'update_time'], 'safe'],
-			[['created_by', 'updated_by', 'level', 'parent_id', 'type'], 'integer'],
-			[['status', 'deleted'], 'boolean'],
-			[['title', 'slug'], 'string', 'max' => 70],
+			[['created_by', 'updated_by', 'parent_id', 'type', 'listing_order', 'menu_hidden'], 'integer'],
+			[['status', 'menu_hidden', 'deleted'], 'boolean'],
+			[['title', 'slug', 'menu_title'], 'string', 'max' => 70],
 			[['short_desc'], 'string', 'max' => 255],
 			[['layout'], 'string', 'max' => 25],
             ['status', 'default', 'value' => self::STATUS_NOT_PUBLISHED],
             ['status', 'in', 'range' => [self::STATUS_PUBLISHED, self::STATUS_NOT_PUBLISHED]],
-            ['type', 'default', 'value' => self::TYPE_NON_STATIC],
+            ['type', 'default', 'value' => self::TYPE_STATIC],
             ['type', 'in', 'range' => [self::TYPE_STATIC, self::TYPE_NON_STATIC]],
             ['parent_id', 'default', 'value' => 0],
             ['slug', 'default', 'value' => null],
             [['title', 'slug'], 'unique'],
+            ['menu_hidden', 'default', 'value' => 1],
+            ['menu_hidden', 'in', 'range' => [self::MENU_HIDDEN_NO, self::MENU_HIDDEN_YES]],
 		];
 	}
 
@@ -86,12 +93,14 @@ class Page extends ActiveRecord
 			'created_by' => 'Created By',
 			'update_time' => 'Update Time',
 			'updated_by' => 'Updated By',
-			'level' => 'Level',
 			'layout' => 'Layout',
 			'parent_id' => 'Parent',
-			'type' => 'Type',
+			'type' => 'Page Type',
 			'status' => 'Status',
 			'deleted' => 'Deleted',
+            'menu_title' => 'Menu Title',
+            'menu_hidden' => 'Hidden in Menu',
+            'listing_order' => 'Listing Order',
 		];
 	}
 
@@ -101,6 +110,32 @@ class Page extends ActiveRecord
         return $this->hasMany(Block::className(), ['parent' => 'slug']);
     }
 
+    public function getActiveBlocks()
+    {
+        $groups = array(
+            'categories' => array(),
+            'blocks' => array(),
+        );
+
+        foreach ($this->blocks as $block) {
+            //get categories
+            if (!in_array($block->category, $groups['categories'])) {
+                $groups['categories'][] = $block->category;
+            }
+
+            //get blocks
+            if ($this->layout == $block->parent_layout || $this->type == self::TYPE_NON_STATIC) {
+                $group = $block->category;
+                if (!isset($groups['blocks'][$group])) {
+                    $groups['blocks'][$group] = array();
+                }
+                $groups['blocks'][$group][] = $block;
+            }
+        }
+
+        return $groups;
+    }
+
     public function behaviors()
     {
         return [
@@ -117,18 +152,32 @@ class Page extends ActiveRecord
                 'attribute' => 'title',
                 'defaultPrefix' => 'Page',
             ],
+            'defaultMenuTitle' => [
+                'class' => 'kato\behaviors\DefaultTitle',
+                'attribute' => 'menu_title',
+                'defaultPrefix' => 'Page',
+            ],
+            'defaultSlug' => [
+                'class' => 'kato\behaviors\DefaultTitle',
+                'attribute' => 'slug',
+                'defaultPrefix' => 'page',
+            ],
             'slug' => [
                 'class' => 'kato\behaviors\Slug',
                 // These parameters are optional, default values presented here:
                 'sourceAttributeName' => 'title', // If you want to make a slug from another attribute, set it here
                 'slugAttributeName' => 'slug', // Name of the attribute containing a slug
-                'onlyIfEmpty' => true,
+                'onlyIfEmpty' => false,
             ],
             'softDelete' => [
                 'class' => 'kato\behaviors\SoftDelete',
                 'attribute' => 'deleted',
                 'safeMode' => true,
             ],
+            'listingOrder' => [
+                'class' => 'kato\behaviors\ListingOrder',
+                'attribute' => 'listing_order',
+            ],
         ];
     }
 
@@ -140,7 +189,7 @@ class Page extends ActiveRecord
     public function beforeSave($insert)
     {
         if (parent::beforeSave($insert)) {
-            $this->createShortDesc();
+            //$this->createShortDesc();
 
             return true;
         }
@@ -151,7 +200,7 @@ class Page extends ActiveRecord
      * Render short_desc and content_html
      * @return bool
      */
-    public function createShortDesc()
+    /*public function createShortDesc()
     {
         $shortDescDone = false;
         $this->content_html = '';
@@ -171,7 +220,7 @@ class Page extends ActiveRecord
         $this->content_html = Markdown::convert($this->content_html);
 
         return true;
-    }
+    }*/
 
     /**
      * Returns id, title of all parents
@@ -187,12 +236,12 @@ class Page extends ActiveRecord
     }
 
     /**
-     * TODO make it work with different themes
+     * List all available layouts
      * @return array
      */
     public function listLayouts()
     {
-        $this->pagesDir =  Yii::getAlias('@frontend') . '/themes/basic/page';
+        $this->pagesDir =  Yii::getAlias('@frontend') . str_replace('/admin','',Yii::$app->view->theme->basePath) . DIRECTORY_SEPARATOR. 'page';
 
         $files = [];
         if ($viewFiles = \kato\helpers\KatoBase::get_files($this->pagesDir)) {
@@ -205,8 +254,91 @@ class Page extends ActiveRecord
         return $files;
     }
 
-    public function renderContent()
+    /*public function renderContent()
     {
         return \Yii::$app->kato->renderBlock($this->content);
+    }*/
+
+    public function loadBlocks()
+    {
+        if ($this->type == self::TYPE_NON_STATIC) {
+            $layout = null;
+            $json_file = $this->slug;
+        } else {
+            $json_file = $layout = $this->layout;
+        }
+
+        //dump(Yii::getAlias('@frontend') . str_replace('/admin','',Yii::$app->view->theme->basePath) . DIRECTORY_SEPARATOR . 'blocks' . DIRECTORY_SEPARATOR);exit;
+        $pages_dir = Yii::getAlias('@frontend') . str_replace('/admin','',Yii::$app->view->theme->basePath) . DIRECTORY_SEPARATOR . 'blocks' . DIRECTORY_SEPARATOR;
+        $page_json = $pages_dir . $json_file . '.json';
+
+        //dump($page_json);
+        //dump(file_exists($page_json));exit;
+        if (file_exists($page_json)) {
+
+            $string = file_get_contents($page_json);
+            $encoded_data = json_decode($string);
+            if (count($encoded_data->blocks) !== 0) {
+                foreach ($encoded_data->blocks as $data) {
+                    if (($block = Block::findOne([
+                            'title' => $data->name,
+                            'parent' => $this->slug,
+                            'parent_layout' => $layout,
+                        ]) === null)
+                    ) {
+                        //if not found, create it
+                        $block = new Block();
+                        $block->parent = $this->slug;
+                        $block->title = $data->name;
+                        $block->block_type = isset($data->type) ? $data->type : 'text-area';
+                        $block->parent_layout = $layout;
+                        if (isset($data->comments)) $block->comments = $data->comments;
+                        $block->category = isset($data->category) ? $data->category : 'General';
+
+                        if (!$block->save()) {
+                            //throw error
+                            throw new HttpException('Unable to load blocks to database');
+
+                        }
+                    }
+                }
+            }
+
+        }
+
+        return true;
+    }
+
+    public function updateBlocks()
+    {
+        $post = Yii::$app->request->post();
+
+        //update blocks
+        if (isset($post['Block'])) {
+            foreach ($post['Block'] as $key => $val) {
+                if ($this->type == self::TYPE_NON_STATIC) {
+                    $layout = null;
+                } else {
+                    $layout = $this->layout;
+                }
+
+                if ($block = Block::findOne([
+                    'title' => $key,
+                    'parent' => $this->slug,
+                    'parent_layout' => $layout,
+                ])) {
+                    $block->content = $val;
+                    if (!$block->save()) {
+                        //throw error
+                        throw new HttpException('Unable to load blocks to database');
+                    }
+                }
+
+            }
+
+            return true;
+        }
+
+        return false;
     }
 }
diff --git a/backend/views/page/_form.php b/backend/views/page/_form.php
index d068f69..520687a 100644
--- a/backend/views/page/_form.php
+++ b/backend/views/page/_form.php
@@ -2,10 +2,8 @@
 
 use yii\helpers\Html;
 use yii\bootstrap\ActiveForm;
-use yii\imperavi\Widget as ImperaviWidget;
 use backend\widgets\Media;
-use kato\sirtrevorjs\SirTrevor;
-
+use backend\models\Page;
 /**
  * @var yii\web\View $this
  * @var backend\models\Page $model
@@ -15,61 +13,77 @@ use kato\sirtrevorjs\SirTrevor;
 
 <div class="row">
     <div class="col-lg-12">
+        <?php $form = ActiveForm::begin([
+            'layout' => 'horizontal',
+            'fieldConfig' => [
+                'horizontalCssClasses' => [
+                    'label' => 'col-sm-4',
+                    'offset' => 'col-sm-offset-4',
+                    'wrapper' => 'col-sm-8',
+                    'error' => '',
+                    'hint' => '',
+                ],
+            ],
+        ]); ?>
         <div class="panel panel-default">
             <div class="panel-heading">
                 <!-- Nav tabs -->
                 <ul class="nav nav-tabs">
                     <li class="active"><a href="#info" data-toggle="tab">Basic Info</a></li>
                     <li><a href="#media" data-toggle="tab">Media</a></li>
+                    <li><a href="#meta" data-toggle="tab">Meta</a></li>
+                    <li><a href="#menu" data-toggle="tab">Menu</a></li>
                 </ul>
             </div>
             <div class="panel-body">
                 <!-- Tab panes -->
                 <div class="tab-content">
                     <div class="tab-pane fade in active" id="info">
-                        <?php $form = ActiveForm::begin([
-                            'layout' => 'horizontal',
-                            'fieldConfig' => [
-                                'horizontalCssClasses' => [
-                                    'label' => 'col-sm-4',
-                                    'offset' => 'col-sm-offset-4',
-                                    'wrapper' => 'col-sm-8',
-                                    'error' => '',
-                                    'hint' => '',
-                                ],
-                            ],
-                        ]); ?>
 
                         <?= $form->field($model, 'title')->textInput(['maxlength' => 70]) ?>
 
-                        <?= $form->field($model, 'slug')->textInput(['maxlength' => 70]) ?>
-
-                        <?= $form->field($model, 'content')->widget(SirTrevor::classname(), [
-                            'imageUploadUrl' => Yii::$app->urlManager->createAdminUrl(['block/upload']),
-                        ]); ?>
-
-                        <?= $form->field($model, 'parent_id')->dropDownList($model->listParents(), ['prompt'=>'Select Parent']); ?>
+                        <?= $form->field($model, 'parent_id')->dropDownList($model->listParents(), ['prompt'=>'No Parent']); ?>
 
                         <?= $form->field($model, 'status')->dropDownList($model->listStatus()); ?>
 
                         <?= $form->field($model, 'layout')->dropDownList($model->listLayouts()); ?>
 
-                        <div class="form-group">
-                            <?= Html::submitButton($model->isNewRecord ? 'Create' : 'Update', ['class' => $model->isNewRecord ? 'btn btn-success col-sm-offset-2' : 'btn btn-primary col-sm-offset-2']) ?>
-                        </div>
-
-                        <?php ActiveForm::end(); ?>
+                        <?= $form->field($model, 'type')->dropDownList([Page::TYPE_STATIC => 'Static', Page::TYPE_NON_STATIC => 'Dynamic']); ?>
                     </div>
 
                     <div class="tab-pane fade in" id="media">
-
                         <?= Media::widget([
                             'model' => $model,
                         ]); ?>
+                    </div>
 
+                    <div class="tab-pane fade in" id="meta">
+                        <?= $form->field($model, 'short_desc')->textarea(['maxlength' => 160]) ?>
+
+                        <?= $form->field($model, 'slug')->textInput(['maxlength' => 70]) ?>
+                    </div>
+
+                    <div class="tab-pane fade in" id="menu">
+                        <?= $form->field($model, 'menu_title')->textInput(['maxlength' => 70]) ?>
+
+                        <?= $form->field($model, 'menu_hidden')->dropDownList([Page::MENU_HIDDEN_NO => 'No', Page::MENU_HIDDEN_YES => 'Yes']) ?>
+
+                        <?= $form->field($model, 'listing_order')->dropDownList($model->listingOrderArray) ?>
                     </div>
                 </div>
             </div>
+            <!-- /.panel-body -->
+            <div class="panel-footer">
+                <?= Html::submitButton($model->isNewRecord ? 'Create' : 'Update', ['class' => $model->isNewRecord ? 'btn btn-success' : 'btn btn-primary']) ?>
+<!--                --><?php //if ($model->isStatic()): ?>
+<!--                    <a class="btn btn-default" href="--><?php //echo $model->permalink; ?><!--" target="_blank">Preview</a>-->
+<!--                --><?php //endif; ?>
+            </div>
         </div>
+        <?php ActiveForm::end(); ?>
     </div>
-</div>
\ No newline at end of file
+</div>
+
+<?php if ($model->blocks) echo $this->render('_inLineBlocks', [
+    'model' => $model,
+]); ?>
diff --git a/backend/views/page/_inLineBlocks.php b/backend/views/page/_inLineBlocks.php
new file mode 100644
index 0000000..d019702
--- /dev/null
+++ b/backend/views/page/_inLineBlocks.php
@@ -0,0 +1,106 @@
+<?php
+
+use yii\helpers\Html;
+use yii\bootstrap\ActiveForm;
+use yii\imperavi\Widget as ImperaviWidget;
+
+/**
+ * @var yii\web\View $this
+ * @var backend\models\Page $model
+ * @var yii\bootstrap\ActiveForm $form
+ */
+?>
+<div class="row">
+    <div class="col-lg-12">
+        <div class="panel panel-default">
+            <div class="panel-heading">
+                <!-- Nav tabs -->
+                <ul class="nav nav-tabs">
+                    <?php $catCount = 0; foreach ($model->activeBlocks['categories'] as $category): $catCount++; ?>
+                        <li class="<?php echo $catCount==1?'active':''; ?>"><a href="#<?php echo $category; ?>" data-toggle="tab"><?php echo ucwords(str_replace("-", " ", $category)); ?></a></li>
+                    <?php endforeach; ?>
+                </ul>
+            </div>
+            <div class="panel-body">
+                <!-- Tab panes -->
+
+                <?php $form = ActiveForm::begin([
+                    'layout' => 'horizontal',
+                    'fieldConfig' => [
+                        'horizontalCssClasses' => [
+                            'label' => 'col-sm-4',
+                            'offset' => 'col-sm-offset-4',
+                            'wrapper' => 'col-sm-8',
+                            'error' => '',
+                            'hint' => '',
+                        ],
+                    ],
+                ]); ?>
+
+                <div class="tab-content">
+
+                    <?php $catCount = 0; foreach ($model->activeBlocks['blocks'] as $category => $blocks): $catCount++; ?>
+
+                        <div class="tab-pane fade in <?php echo $catCount==1?'active':''; ?>" id="<?php echo $category; ?>">
+
+                            <?php foreach ($blocks as $key => $block): ?>
+                                <div class="form-group block">
+                                    <?php echo $block->label; ?>
+                                    <div class="col-sm-9">
+                                        <?php
+                                        if ($block->block_type == 'text-area') {
+                                            echo ImperaviWidget::widget([
+                                                'attribute' => 'Block['.$block->title.']',
+                                                'value' => $block->content,
+                                                // Some options, see http://imperavi.com/redactor/docs/
+                                                'options' => [
+                                                    'toolbar' => 'classic',
+                                                    'minHeight' => 300,
+                                                    'autoresize' => true,
+                                                    //'convertVideoLinks' => true,
+                                                    'imageUpload' => Yii::$app->urlManager->createAdminUrl(['media/upload']),
+                                                    //'imageUploadParam' => 'qqfile',
+                                                    //'uploadFields' => array('editorUpload' => true),
+                                                    'focus' => true,
+                                                    'imageManagerJson' => Yii::$app->urlManager->createAdminUrl(['media/list-media']),
+                                                    //'imageGetJson' => Yii::$app->urlManager->createAdminUrl(['media/list-media']),
+                                                ],
+                                                'plugins' => [
+                                                    /*'pages' => array(
+                                                        'js' => array('pages.js',),
+                                                    ),*/
+                                                    'fullscreen',
+                                                    'table',
+                                                    'counter',
+                                                    'definedlinks',
+                                                    'fontsize',
+                                                    'textexpander',
+                                                    'video',
+                                                    'imagemanager',
+                                                ],
+                                            ]);
+                                        } elseif ($block->block_type == 'text-field') {
+                                            echo $form->field($block, 'content')->textInput(['name' => 'Block['.$block->title.']', 'class' => 'form-control']);
+                                        }
+                                        ?>
+                                    </div>
+                                </div>
+
+                            <?php endforeach; ?>
+                        </div>
+
+                    <?php endforeach; ?>
+
+                    <?= Html::submitButton('Update', ['class' => 'btn btn-primary']) ?>
+                </div>
+
+                <?php ActiveForm::end(); ?>
+
+            </div>
+            <!-- /.panel-body -->
+        </div>
+        <!-- /.panel -->
+    </div>
+    <!-- /.col-lg-12 -->
+</div>
+<!-- /.row -->
\ No newline at end of file
diff --git a/common/config/main.php b/common/config/main.php
index f15cc40..8ad03cf 100644
--- a/common/config/main.php
+++ b/common/config/main.php
@@ -25,6 +25,13 @@ return [
         ],
         'view' => [
             'class' => 'backend\components\View',
+            'theme' => [
+                'pathMap' => [
+                    '@app/views' => '@app/themes/basic'
+                ],
+                'baseUrl' => '@web/themes/basic',
+                'basePath' => '@web/themes/basic',
+            ],
         ],
         'authManager' => [
             'class' => 'yii\rbac\DbManager',
diff --git a/common/models/User.php b/common/models/User.php
index 2584b16..8b198e9 100644
--- a/common/models/User.php
+++ b/common/models/User.php
@@ -165,14 +165,16 @@ class User extends ActiveRecord implements IdentityInterface
 		return $this->getAuthKey() === $authKey;
 	}
 
-	/**
-	 * @param string $password password to validate
-	 * @return bool if password provided is valid for current user
-	 */
-	public function validatePassword($password)
-	{
-		return Yii::$app->getSecurity()->validatePassword($password, $this->password_hash);
-	}
+    /**
+     * Validates password
+     *
+     * @param string $password password to validate
+     * @return boolean if password provided is valid for current user
+     */
+    public function validatePassword($password)
+    {
+        return Yii::$app->security->validatePassword($password, $this->password_hash);
+    }
 
 	/*public function scenarios()
 	{
diff --git a/composer.json b/composer.json
index 8a4ed43..ef1985a 100644
--- a/composer.json
+++ b/composer.json
@@ -18,7 +18,7 @@
         "wiki": "https://github.com/perminder-klair/kato/wiki",
         "source": "https://github.com/perminder-klair/kato"
     },
-    "minimum-stability": "dev",
+    "minimum-stability": "stable",
     "require": {
         "php": ">=5.4.0",
         "yiisoft/yii2": "*",
@@ -29,8 +29,9 @@
         "perminder-klair/yii2-dropzone": "dev-master",
         "perminder-klair/yii2-sir-trevor-js": "dev-master",
         "kartik-v/yii2-widgets": "dev-master",
+        "michelf/php-smartypants": "1.6.0-beta1",
         "kartik-v/yii2-markdown": "dev-master",
-        "asofter/yii2-imperavi-redactor": "*",
+        "asofter/yii2-imperavi-redactor": "dev-master",
         "scorchsoft/scorch-core": "dev-master"
 
     },
diff --git a/composer.lock b/composer.lock
index 3654ea5..f5b1d4b 100644
--- a/composer.lock
+++ b/composer.lock
@@ -4,7 +4,7 @@
         "Read more about it at http://getcomposer.org/doc/01-basic-usage.md#composer-lock-the-lock-file",
         "This file is @generated automatically"
     ],
-    "hash": "3d9f50c3e171298672851f7c46a61f79",
+    "hash": "0cef8fc25b7af9fac0f8071b86cda71e",
     "packages": [
         {
             "name": "asofter/yii2-imperavi-redactor",
@@ -13,12 +13,12 @@
             "source": {
                 "type": "git",
                 "url": "https://github.com/asofter/yii2-imperavi-redactor.git",
-                "reference": "95d8a72e8ec15cc4f437729a981fc48708f46e96"
+                "reference": "e8aeaf69636b6203f083a4df1dfa7f43c31a949d"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/asofter/yii2-imperavi-redactor/zipball/95d8a72e8ec15cc4f437729a981fc48708f46e96",
-                "reference": "95d8a72e8ec15cc4f437729a981fc48708f46e96",
+                "url": "https://api.github.com/repos/asofter/yii2-imperavi-redactor/zipball/e8aeaf69636b6203f083a4df1dfa7f43c31a949d",
+                "reference": "e8aeaf69636b6203f083a4df1dfa7f43c31a949d",
                 "shasum": ""
             },
             "require": {
@@ -55,20 +55,220 @@
                 "imperavi redactor",
                 "yii"
             ],
-            "time": "2014-10-12 15:04:45"
+            "time": "2014-10-16 10:39:54"
+        },
+        {
+            "name": "bower-asset/bootstrap",
+            "version": "v3.2.0",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/twbs/bootstrap.git",
+                "reference": "c068162161154a4b85110ea1e7dd3d7897ce2b72"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/twbs/bootstrap/zipball/c068162161154a4b85110ea1e7dd3d7897ce2b72",
+                "reference": "c068162161154a4b85110ea1e7dd3d7897ce2b72",
+                "shasum": ""
+            },
+            "require": {
+                "bower-asset/jquery": ">=1.9.0"
+            },
+            "type": "bower-asset-library",
+            "extra": {
+                "bower-asset-main": [
+                    "less/bootstrap.less",
+                    "dist/css/bootstrap.css",
+                    "dist/js/bootstrap.js",
+                    "dist/fonts/glyphicons-halflings-regular.eot",
+                    "dist/fonts/glyphicons-halflings-regular.svg",
+                    "dist/fonts/glyphicons-halflings-regular.ttf",
+                    "dist/fonts/glyphicons-halflings-regular.woff"
+                ],
+                "bower-asset-ignore": [
+                    ".*",
+                    "_config.yml",
+                    "CNAME",
+                    "composer.json",
+                    "CONTRIBUTING.md",
+                    "docs",
+                    "js/tests",
+                    "test-infra"
+                ]
+            },
+            "description": "The most popular front-end framework for developing responsive, mobile first projects on the web.",
+            "keywords": [
+                "css",
+                "framework",
+                "front-end",
+                "js",
+                "less",
+                "mobile-first",
+                "responsive",
+                "web"
+            ]
+        },
+        {
+            "name": "bower-asset/jquery",
+            "version": "2.1.1",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/jquery/jquery.git",
+                "reference": "4dec426aa2a6cbabb1b064319ba7c272d594a688"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/jquery/jquery/zipball/4dec426aa2a6cbabb1b064319ba7c272d594a688",
+                "reference": "4dec426aa2a6cbabb1b064319ba7c272d594a688",
+                "shasum": ""
+            },
+            "require-dev": {
+                "bower-asset/qunit": "1.14.0",
+                "bower-asset/requirejs": "2.1.10",
+                "bower-asset/sinon": "1.8.1",
+                "bower-asset/sizzle": "1.10.19"
+            },
+            "type": "bower-asset-library",
+            "extra": {
+                "bower-asset-main": "dist/jquery.js",
+                "bower-asset-ignore": [
+                    "**/.*",
+                    "build",
+                    "speed",
+                    "test",
+                    "*.md",
+                    "AUTHORS.txt",
+                    "Gruntfile.js",
+                    "package.json"
+                ]
+            },
+            "license": [
+                "MIT"
+            ],
+            "keywords": [
+                "javascript",
+                "jquery",
+                "library"
+            ]
+        },
+        {
+            "name": "bower-asset/jquery.inputmask",
+            "version": "3.1.33",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/RobinHerbots/jquery.inputmask.git",
+                "reference": "0c6ce85c1bc12e81ecb0df62fbc62db116b7b53d"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/RobinHerbots/jquery.inputmask/zipball/0c6ce85c1bc12e81ecb0df62fbc62db116b7b53d",
+                "reference": "0c6ce85c1bc12e81ecb0df62fbc62db116b7b53d",
+                "shasum": ""
+            },
+            "require": {
+                "bower-asset/jquery": ">=1.7"
+            },
+            "type": "bower-asset-library",
+            "extra": {
+                "bower-asset-main": [
+                    "./dist/inputmask/jquery.inputmask.js",
+                    "./dist/inputmask/jquery.inputmask.extensions.js",
+                    "./dist/inputmask/jquery.inputmask.date.extensions.js",
+                    "./dist/inputmask/jquery.inputmask.numeric.extensions.js",
+                    "./dist/inputmask/jquery.inputmask.phone.extensions.js",
+                    "./dist/inputmask/jquery.inputmask.regex.extensions.js"
+                ],
+                "bower-asset-ignore": [
+                    "**/.*",
+                    "qunit/",
+                    "nuget/",
+                    "tools/",
+                    "js/",
+                    "*.md",
+                    "build.properties",
+                    "build.xml",
+                    "jquery.inputmask.jquery.json"
+                ]
+            },
+            "license": [
+                "http://opensource.org/licenses/mit-license.php"
+            ],
+            "description": "jquery.inputmask is a jquery plugin which create an input mask.",
+            "keywords": [
+                "form",
+                "input",
+                "inputmask",
+                "jQuery",
+                "mask",
+                "plugins"
+            ]
+        },
+        {
+            "name": "bower-asset/punycode",
+            "version": "v1.3.1",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/bestiejs/punycode.js.git",
+                "reference": "de452f89aea23f126f7b219f576abda1c0823825"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/bestiejs/punycode.js/zipball/de452f89aea23f126f7b219f576abda1c0823825",
+                "reference": "de452f89aea23f126f7b219f576abda1c0823825",
+                "shasum": ""
+            },
+            "type": "bower-asset-library",
+            "extra": {
+                "bower-asset-main": "punycode.js",
+                "bower-asset-ignore": [
+                    "coverage",
+                    "tests",
+                    ".*",
+                    "component.json",
+                    "Gruntfile.js",
+                    "node_modules",
+                    "package.json"
+                ]
+            }
+        },
+        {
+            "name": "bower-asset/yii2-pjax",
+            "version": "v2.0.1",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/yiisoft/jquery-pjax.git",
+                "reference": "f07ce95f6098c0bd5421789a20789f39a19be73b"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/yiisoft/jquery-pjax/zipball/f07ce95f6098c0bd5421789a20789f39a19be73b",
+                "reference": "f07ce95f6098c0bd5421789a20789f39a19be73b",
+                "shasum": ""
+            },
+            "require": {
+                "bower-asset/jquery": ">=1.8"
+            },
+            "type": "bower-asset-library",
+            "extra": {
+                "bower-asset-main": "./jquery.pjax.js",
+                "bower-asset-ignore": [
+                    ".travis.yml",
+                    "test/"
+                ]
+            }
         },
         {
             "name": "cebe/markdown",
-            "version": "0.9.x-dev",
+            "version": "1.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/cebe/markdown.git",
-                "reference": "6a3c3737e9c1f4670f39a771f77b536126788ad2"
+                "reference": "4f6b35cc5cc1025ed946839fd24e05ace617867a"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/cebe/markdown/zipball/6a3c3737e9c1f4670f39a771f77b536126788ad2",
-                "reference": "6a3c3737e9c1f4670f39a771f77b536126788ad2",
+                "url": "https://api.github.com/repos/cebe/markdown/zipball/4f6b35cc5cc1025ed946839fd24e05ace617867a",
+                "reference": "4f6b35cc5cc1025ed946839fd24e05ace617867a",
                 "shasum": ""
             },
             "require": {
@@ -76,6 +276,8 @@
                 "php": ">=5.4.0"
             },
             "require-dev": {
+                "cebe/indent": "*",
+                "facebook/xhprof": "*@dev",
                 "phpunit/phpunit": "3.7.*"
             },
             "bin": [
@@ -84,8 +286,7 @@
             "type": "library",
             "extra": {
                 "branch-alias": {
-                    "dev-master": "1.0.x-dev",
-                    "dev-0.9.x-dev": "0.9.x-dev"
+                    "dev-master": "1.0.x-dev"
                 }
             },
             "autoload": {
@@ -102,10 +303,10 @@
                     "name": "Carsten Brandt",
                     "email": "mail@cebe.cc",
                     "homepage": "http://cebe.cc/",
-                    "role": "Core framework development"
+                    "role": "Creator"
                 }
             ],
-            "description": "A super fast highly extensible markdown parser for PHP",
+            "description": "A super fast, highly extensible markdown parser for PHP",
             "homepage": "https://github.com/cebe/markdown#readme",
             "keywords": [
                 "extensible",
@@ -114,7 +315,7 @@
                 "markdown",
                 "markdown-extra"
             ],
-            "time": "2014-03-05 16:30:51"
+            "time": "2014-10-10 20:54:29"
         },
         {
             "name": "ezyang/htmlpurifier",
@@ -163,16 +364,16 @@
         },
         {
             "name": "imagine/imagine",
-            "version": "0.5.x-dev",
+            "version": "v0.5.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/avalanche123/Imagine.git",
-                "reference": "343580fceed1f89220481ac98480e92f47d91e6c"
+                "reference": "f64ec666baaa800edcbf237db41121a569230709"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/avalanche123/Imagine/zipball/343580fceed1f89220481ac98480e92f47d91e6c",
-                "reference": "343580fceed1f89220481ac98480e92f47d91e6c",
+                "url": "https://api.github.com/repos/avalanche123/Imagine/zipball/f64ec666baaa800edcbf237db41121a569230709",
+                "reference": "f64ec666baaa800edcbf237db41121a569230709",
                 "shasum": ""
             },
             "require": {
@@ -187,11 +388,6 @@
                 "ext-imagick": "to use the Imagick implementation"
             },
             "type": "library",
-            "extra": {
-                "branch-alias": {
-                    "dev-develop": "0.5-dev"
-                }
-            },
             "autoload": {
                 "psr-0": {
                     "Imagine": "lib/"
@@ -216,11 +412,11 @@
                 "image manipulation",
                 "image processing"
             ],
-            "time": "2014-06-13 10:54:04"
+            "time": "2013-07-10 17:25:36"
         },
         {
             "name": "kartik-v/bootstrap-fileinput",
-            "version": "dev-master",
+            "version": "v2.5.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/kartik-v/bootstrap-fileinput.git",
@@ -265,16 +461,16 @@
         },
         {
             "name": "kartik-v/bootstrap-star-rating",
-            "version": "dev-master",
+            "version": "v2.6.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/kartik-v/bootstrap-star-rating.git",
-                "reference": "7bcec99706ca05239319ea0f9a0fd77fcf960f58"
+                "reference": "5f9dedc14fbf13477ea72322b7b608676b046cbc"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/kartik-v/bootstrap-star-rating/zipball/7bcec99706ca05239319ea0f9a0fd77fcf960f58",
-                "reference": "7bcec99706ca05239319ea0f9a0fd77fcf960f58",
+                "url": "https://api.github.com/repos/kartik-v/bootstrap-star-rating/zipball/5f9dedc14fbf13477ea72322b7b608676b046cbc",
+                "reference": "5f9dedc14fbf13477ea72322b7b608676b046cbc",
                 "shasum": ""
             },
             "type": "library",
@@ -302,26 +498,26 @@
                 "jquery",
                 "star"
             ],
-            "time": "2014-10-13 16:16:29"
+            "time": "2014-10-05 14:55:58"
         },
         {
             "name": "kartik-v/dependent-dropdown",
-            "version": "dev-master",
+            "version": "v1.1.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/kartik-v/dependent-dropdown.git",
-                "reference": "f159efb063f5bacb93be6082284ae30b6b2dbedd"
+                "reference": "80cf23ba6a4b9a08d829f6d4abd359c06ef17f95"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/kartik-v/dependent-dropdown/zipball/f159efb063f5bacb93be6082284ae30b6b2dbedd",
-                "reference": "f159efb063f5bacb93be6082284ae30b6b2dbedd",
+                "url": "https://api.github.com/repos/kartik-v/dependent-dropdown/zipball/80cf23ba6a4b9a08d829f6d4abd359c06ef17f95",
+                "reference": "80cf23ba6a4b9a08d829f6d4abd359c06ef17f95",
                 "shasum": ""
             },
             "type": "library",
             "autoload": {
                 "psr-4": {
-                    "kartik\\plugins\\depdrop\\": ""
+                    "kartik\\": ""
                 }
             },
             "notification-url": "https://packagist.org/downloads/",
@@ -344,7 +540,7 @@
                 "option",
                 "select"
             ],
-            "time": "2014-10-05 14:56:58"
+            "time": "2014-05-12 11:40:04"
         },
         {
             "name": "kartik-v/yii2-markdown",
@@ -447,16 +643,16 @@
         },
         {
             "name": "michelf/php-markdown",
-            "version": "dev-lib",
+            "version": "1.4.1",
             "source": {
                 "type": "git",
                 "url": "https://github.com/michelf/php-markdown.git",
-                "reference": "a8c56ecd5e9e7c7d37d00c814c864c3bc8b32694"
+                "reference": "de9a19c7bf352d41cc99ed86c3c0ef17e87394b6"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/michelf/php-markdown/zipball/a8c56ecd5e9e7c7d37d00c814c864c3bc8b32694",
-                "reference": "a8c56ecd5e9e7c7d37d00c814c864c3bc8b32694",
+                "url": "https://api.github.com/repos/michelf/php-markdown/zipball/de9a19c7bf352d41cc99ed86c3c0ef17e87394b6",
+                "reference": "de9a19c7bf352d41cc99ed86c3c0ef17e87394b6",
                 "shasum": ""
             },
             "require": {
@@ -494,20 +690,20 @@
             "keywords": [
                 "markdown"
             ],
-            "time": "2014-08-10 19:25:52"
+            "time": "2014-05-05 02:43:50"
         },
         {
             "name": "michelf/php-smartypants",
-            "version": "dev-lib",
+            "version": "1.6.0-beta1",
             "source": {
                 "type": "git",
                 "url": "https://github.com/michelf/php-smartypants.git",
-                "reference": "e4a873d4a4e0f3dd6fbf5b9e017362f174eb28df"
+                "reference": "c0465c6d4c5ab853c2fa45df6c10bce7e35cc137"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/michelf/php-smartypants/zipball/e4a873d4a4e0f3dd6fbf5b9e017362f174eb28df",
-                "reference": "e4a873d4a4e0f3dd6fbf5b9e017362f174eb28df",
+                "url": "https://api.github.com/repos/michelf/php-smartypants/zipball/c0465c6d4c5ab853c2fa45df6c10bce7e35cc137",
+                "reference": "c0465c6d4c5ab853c2fa45df6c10bce7e35cc137",
                 "shasum": ""
             },
             "require": {
@@ -549,7 +745,7 @@
                 "typographer",
                 "typography"
             ],
-            "time": "2013-08-02 10:48:47"
+            "time": "2013-07-31 18:13:10"
         },
         {
             "name": "perminder-klair/kato-core",
@@ -557,15 +753,16 @@
             "source": {
                 "type": "git",
                 "url": "https://github.com/perminder-klair/kato-core.git",
-                "reference": "b75871bda2b2cce4c53819ca46831b262cf00a57"
+                "reference": "c0643c77fde5805fdeb4ddee7e41504fc5e17d7e"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/perminder-klair/kato-core/zipball/b75871bda2b2cce4c53819ca46831b262cf00a57",
-                "reference": "b75871bda2b2cce4c53819ca46831b262cf00a57",
+                "url": "https://api.github.com/repos/perminder-klair/kato-core/zipball/c0643c77fde5805fdeb4ddee7e41504fc5e17d7e",
+                "reference": "c0643c77fde5805fdeb4ddee7e41504fc5e17d7e",
                 "shasum": ""
             },
             "require": {
+                "php": ">=5.4.0",
                 "yiisoft/yii2": "*"
             },
             "type": "yii2-extension",
@@ -592,7 +789,7 @@
                 "kato",
                 "yii2"
             ],
-            "time": "2014-10-15 08:59:31"
+            "time": "2014-10-15 14:07:32"
         },
         {
             "name": "perminder-klair/yii2-dropzone",
@@ -679,12 +876,12 @@
             "source": {
                 "type": "git",
                 "url": "https://github.com/perminder-klair/scorch-core.git",
-                "reference": "efa10d0e7a5e6c1a968d89181c512af7fec89adb"
+                "reference": "c755ead6a8ac70134bd05c4f5217dff893e2d030"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/perminder-klair/scorch-core/zipball/efa10d0e7a5e6c1a968d89181c512af7fec89adb",
-                "reference": "efa10d0e7a5e6c1a968d89181c512af7fec89adb",
+                "url": "https://api.github.com/repos/perminder-klair/scorch-core/zipball/c755ead6a8ac70134bd05c4f5217dff893e2d030",
+                "reference": "c755ead6a8ac70134bd05c4f5217dff893e2d030",
                 "shasum": ""
             },
             "require": {
@@ -713,20 +910,20 @@
                 " scorchsoft",
                 "scorch cms"
             ],
-            "time": "2014-10-15 10:07:47"
+            "time": "2014-10-15 13:26:51"
         },
         {
             "name": "swiftmailer/swiftmailer",
-            "version": "dev-master",
+            "version": "v5.3.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/swiftmailer/swiftmailer.git",
-                "reference": "613354e08fbddce0943646932b007be9873c658f"
+                "reference": "b86b927dfefdb56ab0b22d1350033d9a38e9f205"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/swiftmailer/swiftmailer/zipball/613354e08fbddce0943646932b007be9873c658f",
-                "reference": "613354e08fbddce0943646932b007be9873c658f",
+                "url": "https://api.github.com/repos/swiftmailer/swiftmailer/zipball/b86b927dfefdb56ab0b22d1350033d9a38e9f205",
+                "reference": "b86b927dfefdb56ab0b22d1350033d9a38e9f205",
                 "shasum": ""
             },
             "require": {
@@ -765,124 +962,43 @@
                 "mail",
                 "mailer"
             ],
-            "time": "2014-10-05 19:53:07"
-        },
-        {
-            "name": "twbs/bootstrap",
-            "version": "v3.0.3",
-            "source": {
-                "type": "git",
-                "url": "https://github.com/twbs/bootstrap.git",
-                "reference": "6d03173a1aad98e75f7d33e65b411c519176c59a"
-            },
-            "dist": {
-                "type": "zip",
-                "url": "https://api.github.com/repos/twbs/bootstrap/zipball/6d03173a1aad98e75f7d33e65b411c519176c59a",
-                "reference": "6d03173a1aad98e75f7d33e65b411c519176c59a",
-                "shasum": ""
-            },
-            "type": "library",
-            "extra": {
-                "branch-alias": {
-                    "dev-master": "3.0.x-dev"
-                }
-            },
-            "notification-url": "https://packagist.org/downloads/",
-            "license": [
-                "Apache-2.0"
-            ],
-            "authors": [
-                {
-                    "name": "Jacob Thornton",
-                    "email": "jacobthornton@gmail.com"
-                },
-                {
-                    "name": "Mark Otto",
-                    "email": "markdotto@gmail.com"
-                }
-            ],
-            "description": "Sleek, intuitive, and powerful mobile first front-end framework for faster and easier web development.",
-            "homepage": "http://getbootstrap.com",
-            "keywords": [
-                "bootstrap",
-                "css"
-            ],
-            "time": "2013-12-05 16:09:10"
-        },
-        {
-            "name": "yiisoft/jquery",
-            "version": "2.1.1",
-            "source": {
-                "type": "git",
-                "url": "https://github.com/yiisoft/jquery.git",
-                "reference": "bc09bbbc8b40cf89812036188b6f94ae7627c73c"
-            },
-            "dist": {
-                "type": "zip",
-                "url": "https://api.github.com/repos/yiisoft/jquery/zipball/bc09bbbc8b40cf89812036188b6f94ae7627c73c",
-                "reference": "bc09bbbc8b40cf89812036188b6f94ae7627c73c",
-                "shasum": ""
-            },
-            "type": "library",
-            "notification-url": "https://packagist.org/downloads/",
-            "license": [
-                "MIT"
-            ],
-            "description": "jQuery JavaScript Library",
-            "homepage": "http://jquery.com",
-            "time": "2014-05-07 05:00:09"
-        },
-        {
-            "name": "yiisoft/jquery-pjax",
-            "version": "dev-master",
-            "source": {
-                "type": "git",
-                "url": "https://github.com/yiisoft/jquery-pjax.git",
-                "reference": "f07ce95f6098c0bd5421789a20789f39a19be73b"
-            },
-            "dist": {
-                "type": "zip",
-                "url": "https://api.github.com/repos/yiisoft/jquery-pjax/zipball/f07ce95f6098c0bd5421789a20789f39a19be73b",
-                "reference": "f07ce95f6098c0bd5421789a20789f39a19be73b",
-                "shasum": ""
-            },
-            "require": {
-                "yiisoft/jquery": ">=1.8"
-            },
-            "type": "library",
-            "notification-url": "https://packagist.org/downloads/",
-            "license": [
-                "MIT"
-            ],
-            "description": "pushState + ajax = pjax, a forked maintainted by the Yii Framework core developers",
-            "homepage": "https://github.com/yiisoft/jquery-pjax#readme",
-            "time": "2014-10-10 13:44:50"
+            "time": "2014-10-04 05:53:18"
         },
         {
             "name": "yiisoft/yii2",
-            "version": "2.0.0-beta",
+            "version": "2.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/yiisoft/yii2-framework.git",
-                "reference": "2a71e361b3cebf872ecaba45feaf23a7d2a1491d"
+                "reference": "cf1ce50f33344fa2cf1b384cd86c1424493d3323"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/yiisoft/yii2-framework/zipball/2a71e361b3cebf872ecaba45feaf23a7d2a1491d",
-                "reference": "2a71e361b3cebf872ecaba45feaf23a7d2a1491d",
+                "url": "https://api.github.com/repos/yiisoft/yii2-framework/zipball/cf1ce50f33344fa2cf1b384cd86c1424493d3323",
+                "reference": "cf1ce50f33344fa2cf1b384cd86c1424493d3323",
                 "shasum": ""
             },
             "require": {
-                "cebe/markdown": "0.9.*",
+                "bower-asset/jquery": "2.1.*@stable | 1.11.*@stable",
+                "bower-asset/jquery.inputmask": "3.1.*",
+                "bower-asset/punycode": "1.3.*",
+                "bower-asset/yii2-pjax": ">=2.0.1",
+                "cebe/markdown": "~1.0.0",
                 "ext-mbstring": "*",
                 "ezyang/htmlpurifier": "4.6.*",
                 "lib-pcre": "*",
                 "php": ">=5.4.0",
-                "yiisoft/jquery": "~2.0 | ~1.10",
-                "yiisoft/jquery-pjax": "*",
                 "yiisoft/yii2-composer": "*"
             },
+            "bin": [
+                "yii"
+            ],
             "type": "library",
+            "extra": {
+                "branch-alias": {
+                    "dev-master": "2.0.x-dev"
+                }
+            },
             "autoload": {
                 "psr-4": {
                     "yii\\": ""
@@ -934,27 +1050,32 @@
                 "framework",
                 "yii2"
             ],
-            "time": "2014-04-13 21:58:59"
+            "time": "2014-10-12 17:09:06"
         },
         {
             "name": "yiisoft/yii2-bootstrap",
-            "version": "2.0.0-beta",
+            "version": "2.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/yiisoft/yii2-bootstrap.git",
-                "reference": "d2518d1f6fb0b3e0e3aba50b9c35f56d580eb3c4"
+                "reference": "925395bd697c3ba2ce73937a7a236bdf26344417"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/yiisoft/yii2-bootstrap/zipball/d2518d1f6fb0b3e0e3aba50b9c35f56d580eb3c4",
-                "reference": "d2518d1f6fb0b3e0e3aba50b9c35f56d580eb3c4",
+                "url": "https://api.github.com/repos/yiisoft/yii2-bootstrap/zipball/925395bd697c3ba2ce73937a7a236bdf26344417",
+                "reference": "925395bd697c3ba2ce73937a7a236bdf26344417",
                 "shasum": ""
             },
             "require": {
-                "twbs/bootstrap": "3.0.*",
+                "bower-asset/bootstrap": "3.2.* | 3.1.*",
                 "yiisoft/yii2": "*"
             },
             "type": "yii2-extension",
+            "extra": {
+                "branch-alias": {
+                    "dev-master": "2.0.x-dev"
+                }
+            },
             "autoload": {
                 "psr-4": {
                     "yii\\bootstrap\\": ""
@@ -967,9 +1088,7 @@
             "authors": [
                 {
                     "name": "Qiang Xue",
-                    "email": "qiang.xue@gmail.com",
-                    "homepage": "http://www.yiiframework.com/",
-                    "role": "Founder and project lead"
+                    "email": "qiang.xue@gmail.com"
                 }
             ],
             "description": "The Twitter Bootstrap extension for the Yii framework",
@@ -977,20 +1096,20 @@
                 "bootstrap",
                 "yii2"
             ],
-            "time": "2014-04-13 21:58:59"
+            "time": "2014-10-12 17:09:06"
         },
         {
             "name": "yiisoft/yii2-composer",
-            "version": "dev-master",
+            "version": "2.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/yiisoft/yii2-composer.git",
-                "reference": "73ad236be1bf7cf4415559a4b592dd5b9cb4b288"
+                "reference": "4ccbb7dd1cc7c5d2da316bb92db784e3b3e403fb"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/yiisoft/yii2-composer/zipball/73ad236be1bf7cf4415559a4b592dd5b9cb4b288",
-                "reference": "73ad236be1bf7cf4415559a4b592dd5b9cb4b288",
+                "url": "https://api.github.com/repos/yiisoft/yii2-composer/zipball/4ccbb7dd1cc7c5d2da316bb92db784e3b3e403fb",
+                "reference": "4ccbb7dd1cc7c5d2da316bb92db784e3b3e403fb",
                 "shasum": ""
             },
             "require": {
@@ -1024,20 +1143,20 @@
                 "extension installer",
                 "yii2"
             ],
-            "time": "2014-10-12 20:44:45"
+            "time": "2014-10-12 17:09:06"
         },
         {
             "name": "yiisoft/yii2-imagine",
-            "version": "dev-master",
+            "version": "2.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/yiisoft/yii2-imagine.git",
-                "reference": "39ac3cc712d64be214a8053735e898fa26fac290"
+                "reference": "964ad31628520cfb21521517cbaa52a53108b0fb"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/yiisoft/yii2-imagine/zipball/39ac3cc712d64be214a8053735e898fa26fac290",
-                "reference": "39ac3cc712d64be214a8053735e898fa26fac290",
+                "url": "https://api.github.com/repos/yiisoft/yii2-imagine/zipball/964ad31628520cfb21521517cbaa52a53108b0fb",
+                "reference": "964ad31628520cfb21521517cbaa52a53108b0fb",
                 "shasum": ""
             },
             "require": {
@@ -1072,20 +1191,20 @@
                 "imagine",
                 "yii2"
             ],
-            "time": "2014-10-12 20:44:45"
+            "time": "2014-10-12 17:09:06"
         },
         {
             "name": "yiisoft/yii2-swiftmailer",
-            "version": "dev-master",
+            "version": "2.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/yiisoft/yii2-swiftmailer.git",
-                "reference": "3b9c27a1ec0ab9ddf610b581326673d91684b84d"
+                "reference": "40fc07ab41e553c8ffaf0847f10ddc68cb553cf8"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/yiisoft/yii2-swiftmailer/zipball/3b9c27a1ec0ab9ddf610b581326673d91684b84d",
-                "reference": "3b9c27a1ec0ab9ddf610b581326673d91684b84d",
+                "url": "https://api.github.com/repos/yiisoft/yii2-swiftmailer/zipball/40fc07ab41e553c8ffaf0847f10ddc68cb553cf8",
+                "reference": "40fc07ab41e553c8ffaf0847f10ddc68cb553cf8",
                 "shasum": ""
             },
             "require": {
@@ -1122,22 +1241,49 @@
                 "swiftmailer",
                 "yii2"
             ],
-            "time": "2014-10-12 20:44:45"
+            "time": "2014-10-12 17:09:06"
         }
     ],
     "packages-dev": [
         {
+            "name": "bower-asset/typeahead.js",
+            "version": "v0.10.5",
+            "source": {
+                "type": "git",
+                "url": "https://github.com/twitter/typeahead.js.git",
+                "reference": "5f198b87d1af845da502ea9df93a5e84801ce742"
+            },
+            "dist": {
+                "type": "zip",
+                "url": "https://api.github.com/repos/twitter/typeahead.js/zipball/5f198b87d1af845da502ea9df93a5e84801ce742",
+                "reference": "5f198b87d1af845da502ea9df93a5e84801ce742",
+                "shasum": ""
+            },
+            "require": {
+                "bower-asset/jquery": ">=1.7"
+            },
+            "require-dev": {
+                "bower-asset/jasmine-ajax": ">=1.3.1,<1.4",
+                "bower-asset/jasmine-jquery": ">=1.5.2,<1.6",
+                "bower-asset/jquery": ">=1.7,<1.8"
+            },
+            "type": "bower-asset-library",
+            "extra": {
+                "bower-asset-main": "dist/typeahead.bundle.js"
+            }
+        },
+        {
             "name": "fzaninotto/faker",
-            "version": "dev-master",
+            "version": "v1.4.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/fzaninotto/Faker.git",
-                "reference": "b6d383161d84092a7a9f5b14db6e2637edbd3a6e"
+                "reference": "010c7efedd88bf31141a02719f51fb44c732d5a0"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/fzaninotto/Faker/zipball/b6d383161d84092a7a9f5b14db6e2637edbd3a6e",
-                "reference": "b6d383161d84092a7a9f5b14db6e2637edbd3a6e",
+                "url": "https://api.github.com/repos/fzaninotto/Faker/zipball/010c7efedd88bf31141a02719f51fb44c732d5a0",
+                "reference": "010c7efedd88bf31141a02719f51fb44c732d5a0",
                 "shasum": ""
             },
             "require": {
@@ -1149,9 +1295,7 @@
             },
             "type": "library",
             "extra": {
-                "branch-alias": {
-                    "dev-master": "1.5.x-dev"
-                }
+                "branch-alias": []
             },
             "autoload": {
                 "psr-0": {
@@ -1174,11 +1318,11 @@
                 "faker",
                 "fixtures"
             ],
-            "time": "2014-10-14 14:30:56"
+            "time": "2014-06-04 14:43:02"
         },
         {
             "name": "phpspec/php-diff",
-            "version": "dev-master",
+            "version": "v1.0.2",
             "source": {
                 "type": "git",
                 "url": "https://github.com/phpspec/php-diff.git",
@@ -1203,7 +1347,8 @@
             "authors": [
                 {
                     "name": "Chris Boulton",
-                    "homepage": "http://github.com/chrisboulton"
+                    "homepage": "http://github.com/chrisboulton",
+                    "role": "Original developer"
                 }
             ],
             "description": "A comprehensive library for generating differences between two hashable objects (strings or arrays).",
@@ -1211,16 +1356,16 @@
         },
         {
             "name": "yiisoft/yii2-codeception",
-            "version": "dev-master",
+            "version": "2.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/yiisoft/yii2-codeception.git",
-                "reference": "e4c331f800031fb0d94556101750c8409c37b5e1"
+                "reference": "2d19dde0b11db3a06bec245b6d2b4343fe59ea39"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/yiisoft/yii2-codeception/zipball/e4c331f800031fb0d94556101750c8409c37b5e1",
-                "reference": "e4c331f800031fb0d94556101750c8409c37b5e1",
+                "url": "https://api.github.com/repos/yiisoft/yii2-codeception/zipball/2d19dde0b11db3a06bec245b6d2b4343fe59ea39",
+                "reference": "2d19dde0b11db3a06bec245b6d2b4343fe59ea39",
                 "shasum": ""
             },
             "require": {
@@ -1252,20 +1397,20 @@
                 "codeception",
                 "yii2"
             ],
-            "time": "2014-10-12 20:44:45"
+            "time": "2014-10-12 17:09:06"
         },
         {
             "name": "yiisoft/yii2-debug",
-            "version": "dev-master",
+            "version": "2.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/yiisoft/yii2-debug.git",
-                "reference": "f2cde70dc8d4571b5c2de8c0a71e4a99a464305d"
+                "reference": "9108fff1bd117ba608b3d17aba4727d916deb3a8"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/yiisoft/yii2-debug/zipball/f2cde70dc8d4571b5c2de8c0a71e4a99a464305d",
-                "reference": "f2cde70dc8d4571b5c2de8c0a71e4a99a464305d",
+                "url": "https://api.github.com/repos/yiisoft/yii2-debug/zipball/9108fff1bd117ba608b3d17aba4727d916deb3a8",
+                "reference": "9108fff1bd117ba608b3d17aba4727d916deb3a8",
                 "shasum": ""
             },
             "require": {
@@ -1299,20 +1444,20 @@
                 "debugger",
                 "yii2"
             ],
-            "time": "2014-10-15 08:16:41"
+            "time": "2014-10-12 17:09:06"
         },
         {
             "name": "yiisoft/yii2-faker",
-            "version": "dev-master",
+            "version": "2.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/yiisoft/yii2-faker.git",
-                "reference": "ad9dcfe99f0e68693fccaa2236b91e9f8eec4ca0"
+                "reference": "7e86db1260be50f5124efb8549172699ad52bed3"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/yiisoft/yii2-faker/zipball/ad9dcfe99f0e68693fccaa2236b91e9f8eec4ca0",
-                "reference": "ad9dcfe99f0e68693fccaa2236b91e9f8eec4ca0",
+                "url": "https://api.github.com/repos/yiisoft/yii2-faker/zipball/7e86db1260be50f5124efb8549172699ad52bed3",
+                "reference": "7e86db1260be50f5124efb8549172699ad52bed3",
                 "shasum": ""
             },
             "require": {
@@ -1346,28 +1491,34 @@
                 "faker",
                 "yii2"
             ],
-            "time": "2014-10-12 20:44:45"
+            "time": "2014-10-12 17:09:06"
         },
         {
             "name": "yiisoft/yii2-gii",
-            "version": "2.0.0-beta",
+            "version": "2.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/yiisoft/yii2-gii.git",
-                "reference": "25c74e5f8f5c75bc3d76c26c44bcd132cb3af212"
+                "reference": "0ab5293df49246a2002210150fa22af37fd9b782"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/yiisoft/yii2-gii/zipball/25c74e5f8f5c75bc3d76c26c44bcd132cb3af212",
-                "reference": "25c74e5f8f5c75bc3d76c26c44bcd132cb3af212",
+                "url": "https://api.github.com/repos/yiisoft/yii2-gii/zipball/0ab5293df49246a2002210150fa22af37fd9b782",
+                "reference": "0ab5293df49246a2002210150fa22af37fd9b782",
                 "shasum": ""
             },
             "require": {
+                "bower-asset/typeahead.js": "0.10.*",
                 "phpspec/php-diff": ">=1.0.2",
                 "yiisoft/yii2": "*",
                 "yiisoft/yii2-bootstrap": "*"
             },
             "type": "yii2-extension",
+            "extra": {
+                "branch-alias": {
+                    "dev-master": "2.0.x-dev"
+                }
+            },
             "autoload": {
                 "psr-4": {
                     "yii\\gii\\": ""
@@ -1380,9 +1531,7 @@
             "authors": [
                 {
                     "name": "Qiang Xue",
-                    "email": "qiang.xue@gmail.com",
-                    "homepage": "http://www.yiiframework.com/",
-                    "role": "Founder and project lead"
+                    "email": "qiang.xue@gmail.com"
                 }
             ],
             "description": "The Gii extension for the Yii framework",
@@ -1391,17 +1540,19 @@
                 "gii",
                 "yii2"
             ],
-            "time": "2014-04-13 21:58:59"
+            "time": "2014-10-12 17:09:06"
         }
     ],
     "aliases": [],
-    "minimum-stability": "dev",
+    "minimum-stability": "stable",
     "stability-flags": {
         "perminder-klair/kato-core": 20,
         "perminder-klair/yii2-dropzone": 20,
         "perminder-klair/yii2-sir-trevor-js": 20,
         "kartik-v/yii2-widgets": 20,
+        "michelf/php-smartypants": 10,
         "kartik-v/yii2-markdown": 20,
+        "asofter/yii2-imperavi-redactor": 20,
         "scorchsoft/scorch-core": 20
     },
     "prefer-stable": false,
diff --git a/console/migrations/m140425_190132_init.php b/console/migrations/m140425_190132_init.php
index c4fc5ff..eb64461 100644
--- a/console/migrations/m140425_190132_init.php
+++ b/console/migrations/m140425_190132_init.php
@@ -56,6 +56,13 @@ class m140425_190132_init extends \yii\db\Migration
             'PRIMARY KEY(name)',
         ));
 
+        //TODO
+        ///* 15:35:17 localhost */ ALTER TABLE `kato_block` ADD `block_type` VARCHAR(50)  NULL  DEFAULT NULL  AFTER `parent`;
+        ///* 15:35:52 localhost */ ALTER TABLE `kato_block` ADD `parent_layout` VARCHAR(50)  NULL  DEFAULT NULL  AFTER `block_type`;
+        ///* 15:36:22 localhost */ ALTER TABLE `kato_block` ADD `comments` VARCHAR(100)  NULL  DEFAULT NULL  AFTER `parent_layout`;
+        ///* 15:36:42 localhost */ ALTER TABLE `kato_block` ADD `category` VARCHAR(50)  NULL  DEFAULT NULL  AFTER `comments`;
+
+
         $this->createTable('{{%kato_block}}', [
             'id' => Schema::TYPE_PK,
             'title' => Schema::TYPE_STRING . '(70) NOT NULL',
@@ -110,6 +117,12 @@ class m140425_190132_init extends \yii\db\Migration
             'media_type' => Schema::TYPE_STRING . '(50)',
         ], $tableOptions);
 
+        //TODO
+        ///* 14:46:43 localhost */ ALTER TABLE `kato_page` ADD `menu_title` VARCHAR(70)  NOT NULL  DEFAULT ''  AFTER `type`;
+        ///* 14:47:33 localhost */ ALTER TABLE `kato_page` ADD `menu_hidden` SMALLINT(6)  NOT NULL  DEFAULT '1'  AFTER `menu_title`;
+        ///* 14:47:33 localhost */ ALTER TABLE `kato_page` ADD `menu_hidden` SMALLINT(6)  NOT NULL  DEFAULT '1'  AFTER `menu_title`;
+
+
         $this->createTable('{{%kato_page}}', [
             'id' => Schema::TYPE_PK,
             'title' => Schema::TYPE_STRING . ' NOT NULL',
@@ -117,7 +130,6 @@ class m140425_190132_init extends \yii\db\Migration
             'short_desc' => Schema::TYPE_STRING,
             'content' => Schema::TYPE_TEXT,
             'content_html' => Schema::TYPE_TEXT,
-            'level' => Schema::TYPE_SMALLINT . ' NOT NULL DEFAULT 1',
             'layout' => Schema::TYPE_STRING . '(25) NOT NULL DEFAULT "default"',
             'parent_id' => Schema::TYPE_STRING,
             'type' => Schema::TYPE_SMALLINT . ' NOT NULL DEFAULT 1',
diff --git a/docs/installation.md b/docs/installation.md
index 2136133..69d2c49 100644
--- a/docs/installation.md
+++ b/docs/installation.md
@@ -12,6 +12,7 @@ If you do not have [Composer](https://getcomposer.org), you may install it by fo
 
 You can then install required libraries using the following command:
 
+    php composer.phar global require "fxp/composer-asset-plugin:1.0.0-beta2"
     php composer.phar install
 
 
diff --git a/docs/pages.md b/docs/pages.md
index b027029..8a6c42a 100644
--- a/docs/pages.md
+++ b/docs/pages.md
@@ -4,9 +4,13 @@ To get page link
 
     \kato\helpers\KatoHtml::page('page-slug');
 
-To get a block (non static) page
+To get a block of static page
 
-    \Yii::$app->kato->block('block_slug');
+    echo \Yii::$app->kato->getBlock('block-name', 'page-slug, 'page-layout');
+    
+To get a block of dynamic (cms driven) page
+
+    echo \Yii::$app->kato->getBlock('block-name', 'page-slug');
 
 To get all blocks of a system (non static) page
 
diff --git a/frontend/config/main.php b/frontend/config/main.php
index 50e62ce..a230b84 100644
--- a/frontend/config/main.php
+++ b/frontend/config/main.php
@@ -48,15 +48,6 @@ return [
                 'static/<slug>' => 'page/view',
             ]
         ],
-        'view' => [
-            'theme' => [
-                'pathMap' => [
-                    '@app/views' => '@app/themes/basic'
-                ],
-                'baseUrl' => '@web/themes/basic',
-                'basePath' => '@web/themes/basic',
-            ],
-        ],
 	],
 	'params' => $params,
 ];
diff --git a/frontend/controllers/PageController.php b/frontend/controllers/PageController.php
index 41bc13f..98200b7 100644
--- a/frontend/controllers/PageController.php
+++ b/frontend/controllers/PageController.php
@@ -19,6 +19,7 @@ class PageController extends \yii\web\Controller
         if (!isset($_GET['slug'])) {
             throw new BadRequestHttpException('Page slug not set.');
         }
+
         $model = Page::find()
             ->where('slug = :slug', [':slug' => HtmlPurifier::process($_GET['slug'])])
             ->one();
@@ -27,7 +28,7 @@ class PageController extends \yii\web\Controller
             throw new BadRequestHttpException('Requested Page does not found.');
         }
 
-        return $this->render('view', [
+        return $this->render($model->layout, [
             'model' => $model,
         ]);
     }
diff --git a/frontend/themes/basic/blocks/basic.json b/frontend/themes/basic/blocks/basic.json
new file mode 100644
index 0000000..4de9ac1
--- /dev/null
+++ b/frontend/themes/basic/blocks/basic.json
@@ -0,0 +1,14 @@
+{
+    "blocks" : [
+        {
+            "name": "details",
+            "type": "text-area",
+            "comments": "This is demo comment",
+            "category": "My Category"
+        },
+        {
+            "name": "demo-text",
+            "type": "text-field"
+        }
+    ]
+}
\ No newline at end of file
diff --git a/frontend/themes/basic/blocks/homepage.json b/frontend/themes/basic/blocks/homepage.json
new file mode 100644
index 0000000..ad66d9a
--- /dev/null
+++ b/frontend/themes/basic/blocks/homepage.json
@@ -0,0 +1,10 @@
+{
+    "blocks" : [
+        {
+            "name": "details",
+            "type": "text-area",
+            "comments": "This is demo comment",
+            "category": "General"
+        }
+    ]
+}
\ No newline at end of file
diff --git a/frontend/themes/basic/page/basic.php b/frontend/themes/basic/page/basic.php
new file mode 100644
index 0000000..d20cf04
--- /dev/null
+++ b/frontend/themes/basic/page/basic.php
@@ -0,0 +1,23 @@
+<?php
+
+use yii\helpers\Html;
+use yii\widgets\DetailView;
+use backend\models\Page;
+
+/**
+ * @var backend\components\View $this
+ * @var backend\models\Page $model
+ */
+
+$this->title = $model->title;
+$this->params['breadcrumbs'][] = $this->title;
+?>
+<div class="page-view">
+
+	<h1><?= Html::encode($this->title) ?></h1>
+
+    <?php echo \Yii::$app->kato->getBlock('details', $model->slug, $model->layout); ?>
+
+    <?php echo \Yii::$app->kato->getBlock('demo-text', $model->slug, $model->layout); ?>
+
+</div>
diff --git a/frontend/themes/basic/page/view.php b/frontend/themes/basic/page/view.php
deleted file mode 100644
index e7299c6..0000000
--- a/frontend/themes/basic/page/view.php
+++ /dev/null
@@ -1,20 +0,0 @@
-<?php
-
-use yii\helpers\Html;
-use yii\widgets\DetailView;
-
-/**
- * @var yii\web\View $this
- * @var backend\models\Page $model
- */
-
-$this->title = $model->title;
-$this->params['breadcrumbs'][] = $this->title;
-?>
-<div class="page-view">
-
-	<h1><?= Html::encode($this->title) ?></h1>
-
-    <?= $model->renderContent(); ?>
-
-</div>
diff --git a/frontend/themes/basic/site/index.php b/frontend/themes/basic/site/index.php
index 1daa8db..202a71e 100644
--- a/frontend/themes/basic/site/index.php
+++ b/frontend/themes/basic/site/index.php
@@ -9,6 +9,8 @@ $this->title = 'My Kato Application';
 	<div class="jumbotron">
 		<h1>Congratulations!</h1>
 
+        <?php echo \Yii::$app->kato->getBlock('details', 'homepage'); ?>
+
 		<p class="lead">You have successfully created your Yii2-powered Scorch CMS application.</p>
 
 		<p><a class="btn btn-lg btn-success" href="http://www.yiiframework.com">Get started with Yii</a></p>
-- 
1.9.3 (Apple Git-50)

